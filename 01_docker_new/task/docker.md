:house: [На главную](https://github.com/netology-code/ibdev-homeworks/tree/master/01_docker_new)

# Задание 1. Образы и контейнеры Docker

## Описание задания

Необходимо установить базовые компоненты Docker. Выполните загрузку готового образа из общедоступного репозитория, запустите контейнер на основе загруженного образа, реализуйсте базовые операции с контейнерами и образами.

-----

## Алгоритм выполнения задания

### Установка базовых компонентов Docker

1. Откройте первый терминал на Kali Linux и выполните команды:

- `sudo apt update` (обновление информации для репозиториев):

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/sudo%20apt%20update.png)

- `sudo apt install docker.io docker-compose` (установка базовых компонентов):

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/sudo%20apt%20install%20docker_1.png)

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/sudo%20apt%20install%20docker_2.png)

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/sudo%20apt%20install%20docker_3.png)

2. После успешной установки базовых компонентов Docker в виртуальной машине должен появиться дополнительный сетевой интерфейс `docker0`, которому всегда присваивается адрес `172.17.0.1` в сети `172.17.0.0/16`.

Проверьте наличие сетевого интерфейса `docker0` с помощью команды `ifconfig` (на Kali Linux):

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/ip%20a_2.png" width="700">

Примечание: на Ubuntu аналогом этой команды будет `ip a`.

3. Подготовьте каталог для работы, для этого:
- создайте в домашнем каталоге рабочий каталог «Work» командой 
`mkdir ~/Work`

- перейдите в созданный каталог командой 
`cd ~/Work`

- создайте подкаталог для работы над проектом из ДЗ «Docker» командой 
`mkdir Docker`

- перейдите в созданный подкаталог командой 
`cd Docker`

- проверьте полный путь к каталогу, в котором находитесь командой 
`pwd`

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/pwd.png" width="400">

4. Загрузите образ Docker.

Общедоступные образы Docker размещаются на специализированном ресурсе Docker HUB. Вы можете ознакомиться с Docker HUB и образами Docker по [ссылке](https://hub.docker.com/).

Воспользуйтесь эффективными инструментами и командами для загрузки интересующих нас образов Docker непосредственно из терминала виртуальной машины. Начнём с образа bash, предназначенного для запуска на его основе контейнеров, для последующей работы в командной оболочке bash.

Загрузите образ bash командой 
`sudo docker pull bash`,

где:
- `pull` - загрузить образ из репозитория Docker HUB,
- `bash` - имя выбранного для загрузки образа Docker.

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/bash.png)

Проверьте наличие загруженного образа в виртуальной машине с помощью команды 
`sudo docker image ls`,

где `image ls` - показать загруженные и размещённые в системе образы Docker.

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/image%20ls.png" width="700">

Отлично! Образ загружен. Обратите внимание на размер образа - он составляет 14 Мб.

Важно понимать, что функционал образа bash ограничен его непосредственным назначением - работой в командной оболочке bash и не более того. Этого достаточно на текущем этапе знакомства с контейнерами Docker.

5. Запустите первый контейнер Docker.

Всё практически готово к запуску первого контейнера Docker на основе образа Bash. Чтобы не запутаться, давайте разберёмся с ролями образа в создании контейнеров:

- `образ` - статический элемент, который подготовлен для запуска контейнеров соответствующего назначения и функционала. Образ не изменяется при работе с контейнером,
- `контейнер` - динамический элемент, который после запуска представляет собой временную компактную виртуальную систему, предназначенную для выполнения команд и решения определённых задач. Контейнер изолирован от основной ОС виртуальной машины и активен до тех пор, пока мы не завершим его работу. 

Запустите контейнер на базе образа bash в интерактивном режиме командой
`sudo docker run -it bash`,

где:
- `run` - запустить контейнер,
- `-it` - в интерактивном режиме (в нашем случае для выполнения произвольных команд),
- `bash` - имя выбранного образа для запуска на его основе контейнера. 

Если образ не был предварительно загружен и отсутствует в нашей виртуальной машине, то он загрузится из хранилища Docker HUB в процессе запуска контейнера.

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/Docker%20HUB.png" width="400">

Если был получен вывод как на скриншоте, значит вы находитесь внутри контейнера в интерактивном режиме. Поздравляем с успешным запуском первого контейнера Docker! 

Как не запутаться и понять, вы находитесь в контейнере или в терминале виртуальной машины? Попробуем разобраться с этим вопросом подробнее. 

6. Откройте дополнительный терминал в ВМ.

До настоящего момента вы работали в единственном активном терминале. Настало время открыть дополнительный терминал в виртуальной машине. Дополнительный терминал можно открыть в отдельном окне либо как новую вкладку в текущем активном терминале. 

Терминал Kali Linux позволяет разделить окно активного терминала на несколько окон с терминалами. Если ваш экран достаточно широкий, то для удобства работы можно разделить терминал на два окна по вертикали. Вы можете подбрать для себя любой другой удобный вариант из предложенных выше.

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/kali_1.png)

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/kali_2.png)

В терминале слева вы находитесь в интерактивном сеансе контейнера bash, а в терминале справа - в командной оболочке виртуальной Kali Lunux.

7. Уточните статус контейнеров.

Перейдите в правый терминал и проверьте наличие активных контейнеров в виртуальной машине Kali Linux командой
`sudo docker ps`,

где `ps` - показать список активных контейнеров.

В нашем случае вы должны увидеть один активный контейнер:

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/ps.png)

Обратите внимание на крайний столбец справа, где указывается имя контейнера, которое присваивается случайным образом автоматически, если вы не присвоили контейнеру конкретное имя. 

8. Остановите и снова активируйте контейнер.

Теперь остановите единственный активный контейнер командой
`sudo docker stop gallant_hofstadter`,

где:
- `stop` - остановить работу активного контейнера,
- `gallant_hofstadter` - имя контейнера.

После успешного завершения команды остановки контейнера в правом терминале вы увидите, что в левом терминале контейнер завершил работу и вернулся в командную оболочку виртуальной Kali Linux.

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/Kali%20Linux_1.png" width="400">

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/Kali%20Linux_2.png" width="350">

Вы остановили работу контейнера. А что с ним произошло на самом деле?

Давайте проверим наличие не только активных, а вообще всех контейнеров в виртуальной машине командой
`sudo docker ps -a`,

где `ps -a` - показать список всех контейнеров.

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/ps%20-a.png)

Мы видим знакомый нам контейнер, с тем же ID и Names, но в статусе Exited (остановлен). Что это означает?

Мы можем активировать контейнер повторно, указав его имя, командой
`sudo docker start gallant_hofstadter`,

где:
- `start` - запустить/возобновить работу неактивного контейнера,
- `gallant_hofstadter` - имя контейнера.

Контейнер возобновит работу, но чтобы подключиться вновь к нему (вернуться в контейнер) и начать взаимодействовать с ним, необходимо выполнить команду
`sudo docker attach gallant_hofstadter`,

где `attach` - подключиться к активному контейнеру.

Попробуйте самостоятельно возобновить работу контейнера, подключиться, остановить и проверить наличие и статус контейнера.

9. Удалите контейнеры и образы из системы.

Контейнеры и образы можно также удалять, если они не востребованы. Удаление остановленных неактивных контейнеров выполняется командой
`sudo docker rm gallant_hofstadter`,

где `rm` - удалить неактивный контейнер.

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/rm.png)

В результате контейнер будет полностью удалён из виртуальной машины. При этом образ Bash остался. 

Проверьте наличие образов командой, которую применяли уже ранее - 
`sudo docker image ls`.

Образ также можно удалить, если контейнеры, привязанные к данному образу, были удалены перед этим.

Удалите единственный образ командой
`sudo docker rmi bash`,

где:
- `rmi` - удалить освобождённый от контейнеров образ,
- `bash` - имя образа.

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/bash_2.png)

-----

## Подведём итоги

В этом задании вы познакомились и отработали базовые приёмы работы с образами и контейнерами Docker, такие как:
- установка базовых компонентов Docker;
- загрузка образов из общедоступного репозитория Docker HUB;
- запуск контейнеров на основе образов;
- мониторинг наличия образов и контейнеров;
- уточнение статуса имеющихся контейнеров;
- повторная активация контейнеров;
- подключение к активным контейнерам;
- полное удаление контейнеров и образов из системы.

-----

:house: [На главную](https://github.com/netology-code/ibdev-homeworks/tree/master/01_docker_new)
