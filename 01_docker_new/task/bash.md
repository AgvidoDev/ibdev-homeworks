:house: [На главную](https://github.com/netology-code/ibdev-homeworks/tree/master/01_docker_new)

# Задание 2. Bash в Docker

## Подготовка к работе

Перед тем, как приступить к заданию, подготовьтесь к работе.

1. У вас должны быть открыты два терминала на одном рабочем столе или один терминал, разделённый по вертикали на левый и правый. В левом терминале вы будете запускать контейнер и работать в нём, а в правом - оставаться в основной системе и применять необходимые команды в процессе выполнения задания. 

2. После завершения [задания 1](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/task/docker.md) из виртуальной машины Kali Linux должны быть удалены контейнеры и образы. 
  
Чтобы убедиться, что контейнеры и образы отсутствуют, выполните команды:
- `sudo docker ps -a`,
- `sudo docker image ls`.

3. Если контейнеры или образы не были удалены, выполните следующий порядок действий для их удаления (см. [задание 1](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/task/docker.md)):
- остановите все активные контейнеры,
- удалите контейнеры,
- удалите образы,
- проверьте наличие/отсутствие контейнеров и образов.

-----

## Алгоритм выполнения задания

1. В левом терминале, находясь в рабочем каталоге, запустите уже знакомый вам контейнер на основе образа bash в интерактивном режиме, но без предварительной загрузки образа.

Добавьте в команду опцию автоматического удаления контейнера после завершения его работы (остановки контейнера)

`sudo docker run –rm -it bash`

где:
- `–rm` - удалить контейнер после завершения его работы.

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/%E2%80%93rm.png)

Убедитесь, что отсутствующий образ загрузился перед запуском контейнера.

2. Переключитесь на правый терминал, перейдите в корневой каталог и проверьте наличие образа и контейнера.

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/contain.png)

3. Вернитесь в левый терминал и выполните в активном контейнере команды bash:
- `whoami` - кто я,
- `cat /etc/*release*` - показать информацию о системе.

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/whoami.png" width="700">

Выполните команду 

`ls -la /` - показать список всех каталогов и файлов в корневом каталоге, включая скрытые системные.

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/ls%20-la.png" width="700">

Перейдите в правый терминал и выполните в основной системе аналогичные команды bash (см. выше).

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/bash_3.png" width="400">

![](https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/bash_4.png)

4. Информация получена. Давайте сравним информацию левого терминала с информацией из правого терминала. 

Отличаются текущие пользователи, названия и версии релизов ОС. Всё верно. В левом терминале вы находитесь в контейнере bash в интерактивном режиме, а в правом - в основной системе в командной оболочке Kali Linux. 

Обратите внимание на системный файл `.dockerenv`, присутствующий в списке выведенных каталогов и файлов в левом терминале. Данный файл является отличительным признаком контейнеров Docker и всегда присутствует в корневом каталоге контейнера. В списке каталогов и файлов корневого каталога основной системы Kali Linux этот файл отсутствует.

Таким образом вы получили подтверждение тому, что в левом терминале вы находитесь в контейнере, а в правом - в корневом каталоге основной системы. 

5. Теперь вы можете завершить работу и остановить контейнер.

Помните, что при запуске контейнера добавлена опция автоматического удаления контейнера после завершения его работы (остановки контейнера)? Это означает, что по команде `exit` контейнер bash должен завершить работу и удалиться из системы полностью. 

Проверяем, выполнив команду 

`exit` (выход)

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/exit.png" width="300">

Далее выполняем команду 

`sudo docker ps -a`

<img src="https://github.com/netology-code/ibdev-homeworks/blob/master/01_docker_new/pic/sudo%20docker%20ps%20-a.png" width="700">

Убеждаемся, что контейнеры отсутствуют.

-----

## Подведём итоги

В этом задании вы:
- запустили контейнер на основе образа bash в интерактивном режиме с автоматическим удалением контейнера после завершения его работы;
- используя команды bash, получили интересующую системную информацию из контейнера и основной системы;
- сравнили полученные результаты и получили объективные доказательства присутствия в контейнере.

-----

:house: [На главную](https://github.com/netology-code/ibdev-homeworks/tree/master/01_docker_new)
